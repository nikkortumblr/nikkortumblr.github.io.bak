---
layout: post
title: Should I use Vagrant or Docker.io for creating an isolated environment?
date: '2014-11-06T03:08:46+00:00'
tags: []
tumblr_url: http://drupalhook.tumblr.com/post/101913801378/should-i-use-vagrant-or-docker-io-for-creating-an
---
<p>I&#8217;m the author of Docker. The short answer is that if you want to manage machines, you should use Vagrant. And if you want to build and run applications environments, you should use Docker. Vagrant is a tool for managing virtual machines. Docker is a tool for building and deploying applications by packaging them into lightweight containers. A container can hold pretty much any software component along with its dependencies (executables, libraries, configuration files etc.), and execute it in a guaranteed and repeatable runtime environment. This makes it very easy to build your app once and deploy it anywhere - on your laptop for testing, then on different servers for live deployment etc. It&#8217;s a common misconception that you can only use Docker on Linux. That&#8217;s incorrect, you can also install Docker on Mac, and Windows support is underway. When installed on Mac, Docker bundles a tiny linux VM (25MB on disk!) which acts as a wrapper for your container. Once installed this is completely transparent, you can use the docker command-line in exactly the same way. This gives you the best of both worlds: you can test and develop your application using containers, which are very lightweight, easy to test and easy to move around (see for example <a href="https://index.docker.io">https://index.docker.io</a> for sharing reusable containers with the docker community), and you don&#8217;t need to worry about the nitty-gritty details of managing virtual machines, which are just a means to an end anyway. In theory it&#8217;s possible to use Vagrant as an abstraction layer for Docker. I recommend against this for 2 reasons: First, Vagrant is not a good abstraction for Docker. Vagrant was designed to manage virtual machines. Docker was designed to manage an application runtime. This means that Docker, by design, can interact with an application in richer ways, and has more information about the application runtime. The primitives in Docker are processes, log streams, environment variables and network links between components. The primitives in Vagrant are machines, block devices, and ssh keys. Vagrant simply sits lower in the stack, and the only way it can interact with a container is by pretending it&#8217;s just another kind of machine, that you can &#8220;boot&#8221; and &#8220;log into&#8221;. So, sure, you can type &#8220;vagrant up&#8221; with a docker plugin and something pretty will happen. Is it a substitute for the full breadth of what Docker can do? Try native Docker for a couple days and see for yourself :) Second, the lock-in argument. &#8220;If you use Vagrant as an abstraction, you will not be locked into Docker!&#8221;. From the point of view of Vagrant, which is designed to manage machines, this makes perfect sense: aren&#8217;t containers just another kind of machine? Just like EC2 and VMWare, we must be careful not to tie our provisioning tools to any particular vendor! This would create lock-in - better to abstract it all away with Vagrant. Except this misses the point of Docker entirely. Docker doesn&#8217;t provision machines, it wraps your application in a lightweight portable runtime which can be dropped anywhere. What runtime you choose for your application has nothing to do with how you provision your machines! For example it&#8217;s pretty frequent to deploy applications to machines which are provisioned by someone else (for example an EC2 instance deployed by your sysadmin, perhaps using Vagrant), or to bare metal machines which Vagrant can&#8217;t provision at all. Conversely, you may use Vagrant to provision machines which have nothing to do with developing your application - for example a ready-to-use Windows IIS box or something. Or you may use Vagrant to provision machines for projects which don&#8217;t use Docker - perhaps they use a combination of rubygems and rvm for dependency management and sandboxing for example. In summary: Vagrant is for managing machines, Docker is for building and running application environments.</p>
